# éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨ Gitee ä¸Šéƒ¨ç½²å’Œæ„å»ºä¼šè®®çºªè¦ Appã€‚

## ç›®å½•

1. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
2. [Gitee ä»“åº“é…ç½®](#gitee-ä»“åº“é…ç½®)
3. [ä½¿ç”¨å®˜æ–¹ Android åœ¨çº¿æ„å»º](#ä½¿ç”¨å®˜æ–¹-android-åœ¨çº¿æ„å»º)
4. [ä½¿ç”¨ Gitee Go CI/CD](#ä½¿ç”¨-gitee-go-cicd)
5. [é…ç½®ç­¾å](#é…ç½®ç­¾å)
6. [ç‰ˆæœ¬å‘å¸ƒæµç¨‹](#ç‰ˆæœ¬å‘å¸ƒæµç¨‹)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## å‡†å¤‡å·¥ä½œ

### 1. åˆ›å»º Gitee ä»“åº“

1. ç™»å½• [Gitee](https://gitee.com/)
2. ç‚¹å‡»å³ä¸Šè§’ "+" â†’ "æ–°å»ºä»“åº“"
3. å¡«å†™ä»“åº“ä¿¡æ¯ï¼š
   - ä»“åº“åç§°ï¼š`meeting-minutes`
   - ä»“åº“ä»‹ç»ï¼šä¼šè®®çºªè¦ App
   - æ˜¯å¦å¼€æºï¼šæ ¹æ®éœ€è¦é€‰æ‹©
4. ç‚¹å‡»"åˆ›å»º"

### 2. æ¨é€ä»£ç åˆ° Gitee

```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://gitee.com/your-username/meeting-minutes.git

# æ¨é€åˆ° master åˆ†æ”¯
git push -u origin master
```

## Gitee ä»“åº“é…ç½®

### è®¾ç½®ä»“åº“è¯­è¨€ä¸º Android

1. è¿›å…¥ä»“åº“é¡µé¢
2. ç‚¹å‡»"ç®¡ç†" â†’ "åŸºæœ¬ä¿¡æ¯"
3. åœ¨"ä»“åº“è¯­è¨€"ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©"Android"
4. ç‚¹å‡»"ä¿å­˜"

## ä½¿ç”¨å®˜æ–¹ Android åœ¨çº¿æ„å»º

âš ï¸ **æ³¨æ„**ï¼šGitee å®˜æ–¹çš„"æ„å»º APK"æŒ‰é’®å¯èƒ½éœ€è¦ç‰¹å®šæ¡ä»¶æ‰ä¼šæ˜¾ç¤ºï¼ˆå¦‚ä¼ä¸šç‰ˆè´¦å·ï¼‰ã€‚å¦‚æœä½ çœ‹ä¸åˆ°è¯¥æŒ‰é’®ï¼Œè¯·ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„ **Gitee Go CI/CD** æ–¹æ¡ˆï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚

### æ­¥éª¤ï¼ˆå¦‚æœå¯è§ï¼‰

1. **ç¡®ä¿é¡¹ç›®ç»“æ„æ­£ç¡®**
   - é¡¹ç›®æ ¹ç›®å½•å¿…é¡»åŒ…å« `gradlew` æ–‡ä»¶
   - é¡¹ç›®å¿…é¡»æ˜¯æ ‡å‡†çš„ Android é¡¹ç›®ç»“æ„

2. **è®¾ç½®ä»“åº“è¯­è¨€**
   - è¿›å…¥ä»“åº“ â†’ ç®¡ç† â†’ åŸºæœ¬ä¿¡æ¯
   - å°†"ä»“åº“è¯­è¨€"è®¾ç½®ä¸º"Android"
   - ä¿å­˜è®¾ç½®

3. **å¼€å§‹æ„å»º**ï¼ˆå¦‚æœæŒ‰é’®å¯è§ï¼‰
   - å›åˆ°ä»“åº“é¦–é¡µ
   - æŸ¥æ‰¾"æ„å»º APK"æŒ‰é’®
   - é€‰æ‹©æ„å»ºé€‰é¡¹ï¼š
     - **åˆ†æ”¯**ï¼šé€‰æ‹©è¦æ„å»ºçš„åˆ†æ”¯ï¼ˆå¦‚ masterï¼‰
     - **Java ç‰ˆæœ¬**ï¼šé€‰æ‹© JDK 11
     - **æ„å»ºç±»å‹**ï¼šé€‰æ‹© debug æˆ– release
   - ç‚¹å‡»"å¼€å§‹æ„å»º"

4. **ä¸‹è½½ APK**
   - æ„å»ºå®Œæˆåï¼Œé¡µé¢ä¼šæ˜¾ç¤ºä¸‹è½½é“¾æ¥
   - ç‚¹å‡»ä¸‹è½½å³å¯è·å¾— APK æ–‡ä»¶

### å¦‚æœçœ‹ä¸åˆ°"æ„å»º APK"æŒ‰é’®

**ä¸ç”¨æ‹…å¿ƒï¼** è¯·ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„ **Gitee Go CI/CD** æ–¹æ¡ˆï¼Œè¿™æ˜¯æ›´ä¸“ä¸šçš„è§£å†³æ–¹æ¡ˆã€‚

## ä½¿ç”¨ Gitee Go CI/CD

è¿™æ˜¯æ›´ä¸“ä¸šçš„æ–¹å¼ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ã€‚

### 1. å¼€é€š Gitee Go

1. è¿›å…¥ä»“åº“é¡µé¢
2. ç‚¹å‡»"æœåŠ¡" â†’ "Gitee Go"
3. å¼€é€š Gitee Go æœåŠ¡ï¼ˆå¯èƒ½éœ€è¦ä»˜è´¹ï¼‰

### 2. é…ç½® CI/CD

é¡¹ç›®å·²åŒ…å« `.gitee-ci.yml` é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

#### è‡ªåŠ¨æ„å»ºè§¦å‘æ¡ä»¶

- **develop åˆ†æ”¯**ï¼šæ¨é€ä»£ç è‡ªåŠ¨æ„å»º Debug APK
- **master åˆ†æ”¯**ï¼šæ¨é€ä»£ç è‡ªåŠ¨æ„å»º Release APK
- **tags**ï¼šåˆ›å»ºæ ‡ç­¾è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒæ­£å¼ç‰ˆæœ¬

#### æ„å»ºäº§ç‰©

- Debug APKï¼šä¿ç•™ 7 å¤©
- Release APKï¼šä¿ç•™ 30 å¤©
- ProGuard æ··æ·†æ˜ å°„æ–‡ä»¶

### 3. æŸ¥çœ‹æ„å»ºçŠ¶æ€

1. è¿›å…¥ä»“åº“é¡µé¢
2. ç‚¹å‡»"æœåŠ¡" â†’ "Gitee Go"
3. æŸ¥çœ‹æµæ°´çº¿æ‰§è¡ŒçŠ¶æ€
4. ç‚¹å‡»å…·ä½“çš„æµæ°´çº¿å¯æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
5. æ„å»ºå®Œæˆåå¯ä¸‹è½½äº§ç‰©

## é…ç½®ç­¾å

Release ç‰ˆæœ¬éœ€è¦ç­¾åæ‰èƒ½å‘å¸ƒåˆ°åº”ç”¨å•†åº—ã€‚

### 1. ç”Ÿæˆ Keystore

```bash
keytool -genkey -v -keystore meeting-minutes.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias meeting-minutes
```

æŒ‰æç¤ºè¾“å…¥ä¿¡æ¯ï¼š
- Keystore å¯†ç 
- å¯†é’¥å¯†ç 
- å§“åã€ç»„ç»‡ç­‰ä¿¡æ¯

### 2. è½¬æ¢ä¸º Base64

```bash
# Linux/Mac
base64 -w 0 meeting-minutes.jks > keystore.txt

# Windows (PowerShell)
[Convert]::ToBase64String([IO.File]::ReadAllBytes("meeting-minutes.jks")) > keystore.txt
```

### 3. é…ç½® Gitee CI/CD ç¯å¢ƒå˜é‡

1. è¿›å…¥ä»“åº“é¡µé¢
2. ç‚¹å‡»"æœåŠ¡" â†’ "Gitee Go" â†’ "è®¾ç½®"
3. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `KEYSTORE_FILE` | (keystore.txt çš„å†…å®¹) | Keystore æ–‡ä»¶çš„ Base64 ç¼–ç  |
| `KEYSTORE_PASSWORD` | your_keystore_password | Keystore å¯†ç  |
| `KEY_ALIAS` | meeting-minutes | å¯†é’¥åˆ«å |
| `KEY_PASSWORD` | your_key_password | å¯†é’¥å¯†ç  |

**æ³¨æ„**ï¼šå‹¾é€‰"ä¿æŠ¤å˜é‡"ä»¥ç¡®ä¿å®‰å…¨ã€‚

### 4. é…ç½®ç¬¬ä¸‰æ–¹éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è‡ªåŠ¨ä¸Šä¼ åˆ°è’²å…¬è‹±æˆ– fir.imï¼š

#### è’²å…¬è‹±

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `PGYER_API_KEY` | your_api_key | è’²å…¬è‹± API Key |
| `PGYER_PASSWORD` | your_password | å®‰è£…å¯†ç ï¼ˆå¯é€‰ï¼‰ |

#### fir.im

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `FIR_API_TOKEN` | your_api_token | fir.im API Token |

## ç‰ˆæœ¬å‘å¸ƒæµç¨‹

### 1. å¼€å‘æµç¨‹

```bash
# åœ¨ develop åˆ†æ”¯å¼€å‘
git checkout develop
git pull origin develop

# å¼€å‘æ–°åŠŸèƒ½
# ... ç¼–ç  ...

# æäº¤å¹¶æ¨é€
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push origin develop

# è‡ªåŠ¨è§¦å‘ Debug æ„å»º
```

### 2. å‘å¸ƒæµ‹è¯•ç‰ˆ

```bash
# åˆå¹¶åˆ° master
git checkout master
git merge develop
git push origin master

# è‡ªåŠ¨è§¦å‘ Release æ„å»º
```

### 3. å‘å¸ƒæ­£å¼ç‰ˆ

```bash
# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.0.0 -m "ç‰ˆæœ¬ 1.0.0

æ–°åŠŸèƒ½ï¼š
- å®æ—¶å½•éŸ³è½¬æ–‡å­—
- æ”¯æŒ 12 ç§æ–¹è¨€
- AI æ™ºèƒ½æ€»ç»“
- å¤šæ ¼å¼å¯¼å‡º

Bug ä¿®å¤ï¼š
- ä¿®å¤å½•éŸ³å´©æºƒé—®é¢˜
- ä¼˜åŒ–è¯†åˆ«å‡†ç¡®ç‡
"

# æ¨é€æ ‡ç­¾
git push origin v1.0.0

# è‡ªåŠ¨è§¦å‘æ­£å¼ç‰ˆæ„å»ºå’Œå‘å¸ƒ
```

### 4. ç‰ˆæœ¬å·è§„åˆ™

é¡¹ç›®ä½¿ç”¨è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†ï¼š

- **versionCode**ï¼šåŸºäº Git æäº¤æ¬¡æ•°
  ```bash
  git rev-list --count HEAD
  ```

- **versionName**ï¼šåŸºäº Git æ ‡ç­¾
  ```bash
  git describe --tags --abbrev=0
  ```

### 5. ç‰ˆæœ¬å·æ ¼å¼

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼ˆSemantic Versioningï¼‰ï¼š

```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·

ä¾‹å¦‚ï¼š1.0.0, 1.2.3, 2.0.0
```

- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

## ç‰ˆæœ¬æ›´æ–°æœåŠ¡å™¨é…ç½®

### 1. åˆ›å»ºç‰ˆæœ¬ä¿¡æ¯ API

åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª API ç«¯ç‚¹ï¼Œè¿”å›æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯ï¼š

```
GET https://your-server.com/api/version/check
```

è¿”å›æ ¼å¼ï¼š

```json
{
  "versionName": "1.0.1",
  "versionCode": 101,
  "downloadUrl": "https://example.com/app-v1.0.1.apk",
  "updateLog": "1. æ–°å¢åŠŸèƒ½\n2. ä¿®å¤ Bug",
  "forceUpdate": false,
  "fileSize": 15728640,
  "md5": "abc123..."
}
```

### 2. é…ç½®åº”ç”¨ä¸­çš„æ›´æ–° URL

åœ¨ `MainActivity.kt` ä¸­ä¿®æ”¹ï¼š

```kotlin
private fun checkUpdate() {
    lifecycleScope.launch {
        try {
            val updateUrl = "https://your-server.com/api/version/check"
            val updateInfo = versionManager.checkUpdate(updateUrl)
            // ...
        } catch (e: Exception) {
            // ...
        }
    }
}
```

## å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥ï¼šæ‰¾ä¸åˆ° gradlew

**åŸå› **ï¼šgradlew æ–‡ä»¶æ²¡æœ‰æ‰§è¡Œæƒé™

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
chmod +x gradlew
git add gradlew
git commit -m "fix: add execute permission to gradlew"
git push
```

### 2. æ„å»ºå¤±è´¥ï¼šä¾èµ–ä¸‹è½½è¶…æ—¶

**åŸå› **ï¼šç½‘ç»œé—®é¢˜æˆ–ä¾èµ–ä»“åº“è®¿é—®æ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é¡¹ç›®å·²é…ç½®é˜¿é‡Œäº‘é•œåƒ
- æ£€æŸ¥ `build.gradle` ä¸­çš„ repositories é…ç½®
- Gitee å®˜æ–¹æ„å»ºä¼šè‡ªåŠ¨ä½¿ç”¨å›½å†…é•œåƒ

### 3. ç­¾åå¤±è´¥

**åŸå› **ï¼šç¯å¢ƒå˜é‡é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç¯å¢ƒå˜é‡åç§°æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ Base64 ç¼–ç æ˜¯å¦æ­£ç¡®
3. éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®

### 4. versionCode ä¸é€’å¢

**åŸå› **ï¼šGit æäº¤å†å²é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æäº¤æ¬¡æ•°
git rev-list --count HEAD

# å¦‚æœä¸º 0ï¼Œç¡®ä¿æœ‰æäº¤è®°å½•
git log
```

### 5. æ— æ³•ä¸‹è½½ APK

**åŸå› **ï¼šäº§ç‰©å·²è¿‡æœŸæˆ–æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- Debug APK ä¿ç•™ 7 å¤©ï¼ŒRelease APK ä¿ç•™ 30 å¤©
- æ£€æŸ¥ä»“åº“è®¿é—®æƒé™
- é‡æ–°è§¦å‘æ„å»º

## æœ€ä½³å®è·µ

### 1. åˆ†æ”¯ç®¡ç†

```
master    â† ç”Ÿäº§ç¯å¢ƒï¼Œåªæ¥å—æ¥è‡ª develop çš„åˆå¹¶
  â†‘
develop   â† å¼€å‘ç¯å¢ƒï¼Œæ—¥å¸¸å¼€å‘
  â†‘
feature/* â† åŠŸèƒ½åˆ†æ”¯ï¼Œå¼€å‘æ–°åŠŸèƒ½
```

### 2. æäº¤ä¿¡æ¯è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ Bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### 3. ç‰ˆæœ¬å‘å¸ƒæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·² Code Review
- [ ] æ›´æ–°æ—¥å¿—å·²ç¼–å†™
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] ç­¾åé…ç½®æ­£ç¡®
- [ ] å·²åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯

### 4. å®‰å…¨å»ºè®®

- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… å¯ç”¨"ä¿æŠ¤å˜é‡"é€‰é¡¹
- âœ… å®šæœŸæ›´æ–°ç­¾åå¯†é’¥
- âœ… ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key
- âœ… ä½¿ç”¨ ProGuard æ··æ·†ä»£ç 

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Gitee å®˜æ–¹æ–‡æ¡£](https://gitee.com/help)
2. æäº¤ [Issue](https://gitee.com/your-username/meeting-minutes/issues)
3. è”ç³»å¼€å‘è€…

---

**ç¥ä½ æ„å»ºé¡ºåˆ©ï¼** ğŸ‰


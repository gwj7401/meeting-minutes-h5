# 🚀 快速测试指南

## 重新构建和安装

### 1. 同步代码到 Android 项目

```bash
npm run android:sync
```

这会将最新的 Web 代码同步到 Android 项目。

### 2. 构建 APK

```bash
npm run android:build
```

或者在 Android Studio 中：
1. 打开 `android` 文件夹
2. 点击 Build → Build Bundle(s) / APK(s) → Build APK(s)

### 3. 安装到手机

**方法 1：使用 ADB**
```bash
adb install -r android/app/build/outputs/apk/debug/app-debug.apk
```

**方法 2：手动安装**
1. 将 `android/app/build/outputs/apk/debug/app-debug.apk` 复制到手机
2. 在手机上点击安装

---

## 测试清单

### ✅ 测试 1：录音音量

**步骤：**
1. 打开应用
2. 点击"录音"
3. 点击"开始录音"
4. 正常音量说话（距离麦克风约 20-30cm）
5. 说话 10-15 秒
6. 点击"停止录音"
7. 在会议列表中找到刚才的录音
8. 点击播放

**预期结果：**
- ✅ 录音音量清晰可听
- ✅ 音质良好
- ✅ 没有明显的噪音或失真

**如果音量还是小：**
- 检查手机麦克风是否正常
- 尝试靠近麦克风说话
- 检查手机系统音量设置

---

### ✅ 测试 2：网络状态提示

**步骤：**
1. 打开应用
2. 点击"录音"
3. 观察录音界面顶部的网络状态提示

**预期结果：**

**场景 A：正常网络 + 可访问 Google**
```
✅ 网络正常，支持实时转写
```
- 绿色背景
- 对勾图标

**场景 B：正常网络 + 无法访问 Google（中国大陆）**
```
ℹ️ 无法访问语音识别服务，仅支持录音
```
- 蓝色背景
- 信息图标

**场景 C：网络离线**
```
⚠️ 网络离线，仅支持录音
```
- 橙色背景
- 警告图标

**测试网络变化：**
1. 开启飞行模式 → 应该显示"网络离线"
2. 关闭飞行模式 → 应该自动检测并更新状态

---

### ✅ 测试 3：录音前确认提示

**步骤（网络不佳时）：**
1. 确保网络状态显示为"无法访问语音识别服务"或"网络离线"
2. 点击"开始录音"

**预期结果：**
- ✅ 弹出确认对话框
- ✅ 对话框说明当前网络状态
- ✅ 提示"录音功能正常，但无法实时转文字"
- ✅ 询问"是否继续？"

**点击"确定"：**
- ✅ 开始录音
- ✅ 显示"开始录音（无实时转写），请说话..."

**点击"取消"：**
- ✅ 不开始录音
- ✅ 返回录音界面

---

### ✅ 测试 4：实时转写（如果有 VPN）

**步骤：**
1. 连接 VPN（确保可以访问 Google）
2. 打开应用
3. 点击"录音"
4. 观察网络状态（可能显示"网络正常"或"无法访问服务"）
5. 点击"开始录音"
6. 清晰地说话

**预期结果：**

**如果网络状态显示"网络正常"：**
- ✅ 说话时，下方文字区域实时显示识别的文字
- ✅ 临时文字显示为灰色
- ✅ 最终文字显示为黑色

**如果网络状态显示"无法访问服务"：**
- ✅ 弹出确认对话框
- ✅ 确认后开始录音
- ✅ 没有实时文字显示（这是正常的）

---

### ✅ 测试 5：完整录音流程

**步骤：**
1. 打开应用
2. 点击"录音"
3. 选择识别语言（可选）
4. 点击"开始录音"
5. 如果有确认对话框，点击"确定"
6. 说话 30 秒
7. 点击"停止录音"
8. 返回会议列表
9. 点击刚才的会议
10. 播放录音
11. 如果没有实时转写，手动输入文字
12. 点击"保存"

**预期结果：**
- ✅ 录音正常保存
- ✅ 音量清晰
- ✅ 可以正常播放
- ✅ 可以编辑文字内容
- ✅ 可以导出为 Markdown

---

## 调试技巧

### 查看控制台日志

如果遇到问题，可以通过以下方式查看日志：

**方法 1：Chrome 远程调试**
1. 手机连接电脑（USB 调试模式）
2. 在电脑 Chrome 浏览器打开 `chrome://inspect`
3. 找到应用的 WebView
4. 点击 "inspect"
5. 查看 Console 标签页的日志

**方法 2：Android Studio Logcat**
1. 打开 Android Studio
2. 点击底部的 "Logcat"
3. 过滤包名：`com.meetingminutes.app`
4. 查看日志输出

### 常见日志信息

**正常启动：**
```
页面加载完成，设置语音识别回调
浏览器支持语音识别: true
开始检测网络状态...
测试语音识别服务连接...
语音识别服务连接成功
语音识别服务可用
```

**网络问题：**
```
页面加载完成，设置语音识别回调
浏览器支持语音识别: true
开始检测网络状态...
测试语音识别服务连接...
语音识别服务测试失败: network
语音识别服务不可用（可能被阻止）
```

**录音启动：**
```
开始录音...
请求麦克风权限...
麦克风权限已获取
音频轨道能力: {...}
已应用音频约束: {...}
MediaRecorder 已创建
会议记录已创建
录音已启动
MediaRecorder 已启动
```

---

## 问题排查

### 问题 1：录音音量还是很小

**可能原因：**
- 手机麦克风硬件问题
- 麦克风被遮挡
- 距离太远

**解决方法：**
1. 用其他录音应用测试麦克风
2. 确保麦克风没有被遮挡
3. 靠近麦克风说话（10-20cm）
4. 提高说话音量

### 问题 2：网络状态一直显示"正在检测"

**可能原因：**
- 网络连接不稳定
- 权限问题

**解决方法：**
1. 检查网络连接
2. 重新加载页面
3. 查看控制台日志
4. 重启应用

### 问题 3：有 VPN 但还是无法实时转写

**这是正常的！**

原因：
- Android WebView 可能不使用系统 VPN
- Google 服务访问限制

解决方案：
- 使用录音 + 手动输入文字
- 或考虑集成国内语音识别服务

### 问题 4：点击"开始录音"没有反应

**可能原因：**
- 麦克风权限被拒绝
- 麦克风被其他应用占用

**解决方法：**
1. 检查应用权限设置
2. 关闭其他使用麦克风的应用
3. 重启应用
4. 查看控制台错误信息

---

## 性能测试

### 测试长时间录音

**步骤：**
1. 开始录音
2. 持续说话 5-10 分钟
3. 停止录音
4. 检查录音文件大小和质量

**预期结果：**
- ✅ 录音正常保存
- ✅ 文件大小合理（约 1-2 MB/分钟）
- ✅ 音质稳定
- ✅ 没有卡顿或中断

### 测试多次录音

**步骤：**
1. 连续录制 5-10 个会议
2. 每个会议 1-2 分钟
3. 检查所有录音

**预期结果：**
- ✅ 所有录音都正常保存
- ✅ 音质一致
- ✅ 没有内存泄漏
- ✅ 应用运行流畅

---

## 反馈

如果测试中发现任何问题，请记录：

1. **问题描述**：具体发生了什么
2. **复现步骤**：如何触发问题
3. **预期结果**：应该发生什么
4. **实际结果**：实际发生了什么
5. **设备信息**：手机型号、Android 版本
6. **网络环境**：WiFi/4G/5G、是否使用 VPN
7. **控制台日志**：相关的错误信息

---

**祝测试顺利！** 🎉

